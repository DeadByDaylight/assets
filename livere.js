/*! livere.tower 2018-1-13 modified */
var LivereTower=function(){"use strict";function serial(e){return e+"-"+Math.floor(1e3*Math.random())}function addEventListener(e,t){return window.addEventListener?window.addEventListener(e,t):window.attachEvent("on"+e,t)}function removeEventListener(e,t){return window.removeEventListener?window.removeEventListener(e,t):window.detachEvent("on"+e,t)}function isMobile(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function postMessage(e,t){if(e&&t&&!isRestrictIEVersion(7))return e.postMessage(JSON.stringify(t),"*")}function animateScroll(e,t){function n(){return clearInterval(get("timer"))}set("timer",setInterval(function(){return(t?e>=offset():e<=offset())?(clearInterval(get("timer")),set("timer",null)):(setTimeout(n,1e3),window.scrollTo(0,t?offset()-100:offset()+100))},1))}function isRestrictIEVersion(e){if(e){var t=(get("browser")?get("browser"):setBrowser()).split(" ")[0],n=Number(get("browser").split(" ")[1]);return"MSIE"===t&&!(n&&n>e)}}function setBrowser(){return set("browser",(t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\bOPR\/(\d+)/))?"Opera "+e[1]:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))));var e,t,n}function isObjectPropertiesNull(e){for(var t in e)if("string"!=typeof t||!e[t]&&0!==e[t])return!0;return!1}function hasProtocol(e){return new RegExp("^(http|https)://","i").test(e)}function search(e,t,n){return e<1?n:"object"==typeof n?search(e-1,t,n[t[t.length-e]]):void 0}function get(e){var t=variables[e];return"object"==typeof(e=e.split("."))&&e.length>1&&(t=search(e.length,e,variables)),t}function set(e,t){if("object"!=typeof e||t)return variables[e]=t,get(e);for(var n in e)variables[n]=e[n]}function warning(e){console.log(["WARN: ",e].join(""))}function error(e){throw["ERROR: ",e].join("")}function template(e,t){var n,o,r,i;if(e&&!(["comment","sidebar","check"].indexOf(e)<0))return n=e,o=t,r=document.createElement("iframe"),i=get("baseURI")+n+"/"+o.id,r.title="livere",r.scrolling="no",r.async=!0,r.frameBorder=0,r.allowTransparency="true",r.src="check"===n?"https://101.livere.co.kr/html/systemCheck.html":concatURI(i,o,!0),isRestrictIEVersion(7)&&(r.scrolling="auto",r.height="1000px"),r}function concatURI(e,t,n){var o="?";for(var r in t)t[r]&&(o+="?"!==o?"&":"",o+=r+"="+encodeURIComponent(t[r]));return e+o+(n?"":"callback=?")}function offset(){return window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop}function getCommentOffset(){var e=get("lv_comment"),t=e.ownerDocument,n=t.documentElement,o=e.getBoundingClientRect(),r=t.body,i=window,a=n.clientTop||r.clientTop||0,c=n.clientLeft||r.clientLeft||0,s=i.pageYOffset||r.scrollTop,l=i.pageXOffset||r.scrollLeft;return{top:o.top+s-a,left:o.left+l-c}}var livere={},widget={},config={},variables={},a254,a222,a217;return livere.__version__="9.1",livere.init=function(){return isRestrictIEVersion(9)?config.previousVersion.call(this):location.search.indexOf("redirectOrigin=true")>-1?widget.oauth.call(this):livere.start.call(this)},livere.start=function(){if(document.getElementById("lv-container")){livere.attachEvents.call(this),set({baseURI:"https://livere.me/",mobile:isMobile(),common:config.parse()});var e=(window.livereOptions||{}).components||["comment","sidebar"];return livere.load(isRestrictIEVersion(7)?["comment"]:e)}},livere.attachEvents=function(){var e={comment:{loaded:function(e,t){widget.comment.resize(e,t.height),widget.comment.updateParams()},resize:function(e,t){return widget.comment.resize(e,t.height)},highlight:function(e,t){return widget.comment.highlight(e,t.top)},attached:function(){return addEventListener("scroll",widget.comment.parentHeight),widget.comment.parentHeight()},detached:function(){return removeEventListener("scroll",widget.comment.parentHeight)},scrollTo:function(e,t){var n=get("lv_comment").offsetTop+t.position;return window.scrollTo(0,Math.abs(n)-50)},scrollToQuotation:function(e,t){var n=get("lv_comment").offsetTop,o=get("quotation"),r=t.direction;return r?(set("quotation",offset()),offset()>5e3?window.scrollTo(0,n):animateScroll(n,r)):o>5e3?window.scrollTo(0,o):animateScroll(o,r)},sidebar:function(e,t){return widget.sidebar.open(t)},openCardReplyPopup:function(e,t){return widget.sidebar.openCardReplyPopup(t)},actionSuccess:function(e,t){return widget.sidebar.actionSuccess(t)},deleteSuccess:function(e,t){return widget.sidebar.deleteSuccess(t)},hooker:function(e,t){var n=window.livereHooks;if(n){var o={common:function(e){return n[t.type]?n[t.type].call(this,e):null},created:function(e){return o.common(e)},write:function(e){return o.common(e)},modify:function(e){return o.common(e)},remove:function(e){return o.common(e)},like:function(e){return o.common(e)},dislike:function(e){return o.common(e)}};return o[t.type]?o[t.type].call(this,t.data):null}}},sidebar:{inited:function(t,n){return e.sidebar.hooker(t,n)},fail:function(){return e.sidebar.close(this)},state:function(){return widget.comment.state()},close:function(e){return widget.sidebar.close()},updateBlock:function(e,t){return widget.comment.updateBlock(t)},closeCardReplyPopup:function(e,t){return widget.sidebar.closeCardReplyPopup()},requestAction:function(e,t){return widget.comment.requestAction(t)},requestDeleteReply:function(e,t){return widget.comment.requestDeleteReply(t)},hooker:function(e,t){var n=window.livereHooks;if(n){var o={inited:function(e){return n.sidebarInit?n.sidebarInit.call(this,e):null}};return o[t.type]?o[t.type].call(this,t.data):null}}},utils:{hooker:function(e,t){var n=window.livereHooks;if(n){var o={loginData:function(e){return n.loginData?n.loginData.call(this,e):null},sessionData:function(e){return n.sessionData?n.sessionData.call(this,e):null}};return o[t.type]?o[t.type].call(this,t.data):null}},livereLoggedIn:function(){return widget.sidebar.getLoginData()},cityLoggedIn:function(){return widget.sidebar.getCurrentSessionData()}},popup:{image:function(e,t){return widget.sidebar.image(t)}}};return addEventListener("message",function(t){if(t.data&&"string"==typeof t.data&&t.data.match(/^{.*}$/g)){var n=JSON.parse(t.data),o=e[n.caller];return!!o&&o[n.e](n.caller,n.params)}})},livere.load=function(e){var t=get("common");if(!(!e instanceof Array))for(var n=0;n<e.length;n++)widget[e[n]]&&widget[e[n]].draw(template(e[n],t))},widget.check=(a217={},a217.draw=function(e){if(console.log(e),e){var t=serial("lv-check");e.style.cssText="min-width:100%;width:100px;*width:100%;height:250px;overflow:hidden;border:0;z-index:124212;",e.id=t,document.getElementById("lv-container").appendChild(e)}},a217),widget.comment=(a222={},a222.state=function(){var e=get("lv_comment");if(e)return postMessage(e.contentWindow,{e:"state"})},a222.updateBlock=function(e){return postMessage(get("lv_comment").contentWindow,{e:"updateBlock",params:e})},a222.highlight=function(e,t){var n=get("lv_comment").offsetTop;return window.scrollTo(0,n+t)},a222.parentHeight=function(e){var t=offset()-getCommentOffset().top+30,n=document.documentElement.clientHeight,o=n/2;return postMessage(get("lv_comment").contentWindow,{e:"position",params:{top:t>0?t:0,center:t>0?t+o:o,bottom:n+offset()-100}})},a222.draw=function(e){if(e){var t=serial("lv-comment");return e.style.cssText="min-width:100%;width:100px;*width:100%;height:500px;overflow:hidden;border:0;z-index:124212;",e.id=t,document.getElementById("lv-container").appendChild(e),n=t,set("lv_comment",document.getElementById(n))}var n},a222.resize=function(e,t){return get("lv_comment").style.height=t+40+"px"},a222.updateParams=function(){var e=document.querySelector('meta[property="og:description"]');if(e&&e.content)return postMessage(get("lv_comment").contentWindow,{e:"updateParams",params:{description:e.content}})},a222.updateBlock=function(e){return postMessage(get("lv_comment").contentWindow,{e:"updateBlock",params:e})},a222.requestAction=function(e){return postMessage(get("lv_comment").contentWindow,{e:"requestAction",params:e})},a222.requestDeleteReply=function(e){return postMessage(get("lv_comment").contentWindow,{e:"requestDeleteReply",params:e})},a222),widget.sidebar=(a254={},a254.open=function(e){return(get("mobile")?function(e){var t="https://livere.me/sidebar/"+get("common.id");if(!e)return location.href=t;var n=concatURI(t,{uid:e.uid,member_group_seq:e.member_group_seq,path:e.path},!0);return location.href=n}:function(e){var t=get("lv_utils");return t.style.height="100%",t.style.display="block",postMessage(t.contentWindow,{e:"open",params:e})}).call(this,e)},a254.image=function(e){var t=get("lv_utils");return t.style.display="block",postMessage(t.contentWindow,{e:"image",params:e})},a254.draw=function(e){if(e){var t=serial("lv-utils");return e.style.cssText="width:100%;overflow:hidden;border:0;position:fixed;left:0;top:0;z-index:2147483647;display:none",e.style.height=document.documentElement.clientHeight+"px",e.id=t,document.getElementsByTagName("body")[0].appendChild(e),a254.attachEvent(),n=t,set("lv_utils",document.getElementById(n))}var n},a254.openCardReplyPopup=function(e){var t=get("lv_utils");return t.style.display="block",postMessage(t.contentWindow,{e:"openCardReplyPopup",params:e})},a254.closeCardReplyPopup=function(e){get("lv_utils").style.display="none"},a254.actionSuccess=function(e){return postMessage(get("lv_utils").contentWindow,{e:"actionSuccess",params:e})},a254.deleteSuccess=function(e){var t=get("lv_utils");return t.style.display="none",postMessage(t.contentWindow,{e:"deleteSuccess",params:e})},a254.attachEvent=function(){addEventListener("resize",widget.sidebar.resize)},a254.resize=function(){var e=get("lv_utils"),t=document.documentElement.clientHeight;e.style.height=t+"px",postMessage(e.contentWindow,{e:"resize",params:{height:t}})},a254.close=function(){return get("lv_utils").style.display="none",removeEventListener("resize",widget.sidebar.resize)},a254.getLoginData=function(){return postMessage(get("lv_utils").contentWindow,{e:"loginData"})},a254.getCurrentSessionData=function(){return postMessage(get("lv_utils").contentWindow,{e:"sessionData"})},a254),widget.oauth=function(){var e,t,n;e=document,n=e.getElementsByTagName("script")[0],(t=e.createElement("script")).src="https://api-city.livere.com/smartlogin",t.async=!0,n.parentNode.insertBefore(t,n)},config.previousVersion=function(){return Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,o=this.length;n<o;n++)if(this[n]===e)return n;return-1}),a306=document.createStyleSheet(),a307=function(e,t){var n,o=document.all,r=o.length,i=[];for(a306.addRule(e,"foo:bar"),n=0;n<r&&!("bar"===o[n].currentStyle.foo&&(i.push(o[n]),i.length>t));n+=1);return a306.removeRule(0),i},document.querySelectorAll||document.querySelector||(document.querySelectorAll=function(e){return a307(e,1/0)},document.querySelector=function(e){return a307(e,1)[0]||null}),"object"!=typeof JSON&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,o,r,i,a,c=gap,s=t[e];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),"function"==typeof rep&&(s=rep.call(t,e,s)),typeof s){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(s)){for(i=s.length,n=0;n<i;n+=1)a[n]=str(n,s)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+c+"]":"["+a.join(",")+"]",gap=c,r}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;n<i;n+=1)"string"==typeof rep[n]&&(o=rep[n],(r=str(o,s))&&a.push(quote(o)+(gap?": ":":")+r));else for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r=str(o,s))&&a.push(quote(o)+(gap?": ":":")+r);return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+c+"}":"{"+a.join(",")+"}",gap=c,r}}var cx,escapable,gap,indent,meta,rep;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var o;if(gap="",indent="","number"==typeof n)for(o=0;o<n;o+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var n,o,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(o=walk(r,n),void 0!==o?r[n]=o:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),livere.start.call(this);var a306,a307},config.parse=function(){var e=document,t=e.querySelector("#lv-container"),n=window.livereOptions||{};if(t){var o=e.querySelector('meta[property="og:image"]'),r=e.querySelector('meta[property="og:title"]'),i=e.querySelector('meta[property="og:url"]'),a=location.hash.match(/#highlight-comment=([0-9]{1,})/),c={id:t.getAttribute("data-id"),refer:n.refer||window.refer||location.host+location.pathname};if(!isObjectPropertiesNull(c))return c.uid=t.getAttribute("data-uid")||null,c.site=n.site||(i?i.getAttribute("content"):location.href),c.title=(r?r.getAttribute("content"):document.title)||"Welcome to the black parade",c.logo=o?o.getAttribute("content"):null,c.highlightSeq=a?a[a.length-1]:null,c.redirectOrigin=n.redirectOrigin||null,c.title=c.title.replace(/\"/g,"锛�").replace(/\'/g,"锛�"),n.facebookPageId&&n.facebookUploadUrl&&(c.facebookPageId=n.facebookPageId,c.facebookUploadUrl=n.facebookUploadUrl),c}},livere.get=get,livere.set=set,livere.refresh=function(){return widget.comment.state()},livere.common={utils:{open:function(){return widget.sidebar.open()},getLoginData:function(){return widget.sidebar.getLoginData()},getCurrentSessionData:function(){return widget.sidebar.getCurrentSessionData()}}},livere}();LivereTower.init();
